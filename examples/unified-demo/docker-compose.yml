services:
  unified-demo:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: unified-demo
    ports:
      - "8080:8080"    # Web dashboard
      - "8765:8765"    # WebSocket API
    environment:
      - JWT_SECRET=${JWT_SECRET:-demo-secret-change-in-production}
      - ROS_DOMAIN_ID=0
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock  # For managing sub-containers
    networks:
      - demo-network
    command: python3 /app/demo_server.py

networks:
  demo-network:
    driver: bridge
